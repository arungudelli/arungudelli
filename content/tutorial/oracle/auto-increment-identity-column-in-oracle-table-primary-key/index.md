+++
title="2 Ways To Create Auto Increment Column In Oracle (Primary Key)"
summary="We can create Auto increment columns in oracle by using IDENTITY columns in Oracle 12c. And in Oracle Database does not have any exisiting feature to auto increment column values in table schema until Oracle 12c (mid 2014).We can sequences and triggers to create auto increment columns on older vesions of oracle"
keywords="oracle,auto increment column in oracle,identity column in oracle"
type='post'
date='2019-11-16T20:51:58+0000'
lastmod='2019-11-16T20:51:58+0000'
draft='false'
authors=['admin']
[image]
caption='2 Ways To Create Auto Increment Column In Oracle (Primary Key)'
focal_point=''
preview_only=false
+++








We can create Auto increment columns in oracle by using IDENTITY columns in Oracle 12c. And in Oracle Database does not have any exisiting feature to auto increment column values in table schema until Oracle 12c (mid 2014).

Auto increment columns widely used for auto-generating&nbsp;values for primary keys in Database tables.Most of the databases like SQL server etc have existing features to create auto increment columns.

In Oracle 12c they introduced IDENTITY columns which allows users to create auto increment columns.

In previous versions of Oracle this functionality developed using the combination of Sequences and Triggers.

In this tutorial I am going to explain&nbsp;these two ways to implement auto increment coulmns in Oracle database tables with examples,pros &amp; cons of each method.

<ol><li><a href="#identity">Create Auto increment column in oracle By using IDENTITY Column</a></li><li><a href="#seq">Create Auto increment column in oracle column By using&nbsp;Sequences and Triggers.</a></li><li><a href="#perf">Best way to create auto increment column in oracle</a></li><li><a href="#limit">Limitations of IDENTITY Coulmn</a></li></ol>

{{< figure src="AutoIncrementColumn.jpg" title="Auto Increment Column in Oracle" alt="Auto Increment Column in Oracle" >}}

### Create Auto increment column in oracle By using IDENTITY Column example:

Create an IDENTITY column by using following syntax

<pre>CREATE TABLE auto_increment_column_table (
 auto_increment_column_id NUMBER GENERATED ALWAYS AS IDENTITY,
 auto_increment_column_description VARCHAR2(50)
);</pre>

Now we can insert rows into the table

<pre>INSERT INTO auto_increment_column_table (auto_increment_column_desc) 
VALUES ('Test Data');
--1 rows inserted</pre>

We have three options to create IDENTITY Column

<ol><li><a href="#always">ALWAYS</a></li><li><a href="#default">BY DEFAULT</a></li><li><a href="#defaultNull">BY DEFAULT ON NULL</a></li></ol>

### ALWAYS AS IDENTITY Example:

We are using ALWAYS to force the use of IDENTITY. If we try to insert value into the IDENTITY column it will throw error saying cannot insert into a generated always identity column.

<pre>INSERT INTO auto_increment_column_table 
(auto_increment_column_id, auto_increment_column_desc) 
VALUES (NULL, 'Null Column');

INSERT INTO auto_increment_column_table 
(auto_increment_column_id, auto_increment_column_desc) 
VALUES (999, 'Manually inserting auto increment column');

--ORA-32795: cannot insert into a generated always identity column


</pre>

### BY DEFAULT AS IDENTITY Example:

Create IDENTITY column with BY DEFAULT option to insert values into IDENTITY column by referencing it in insert statement.

<pre>CREATE TABLE auto_increment_default_column (
 auto_increment_column_id NUMBER GENERATED BY DEFAULT AS IDENTITY,
 auto_increment_column_desc VARCHAR2(50)
 );

INSERT INTO auto_increment_default_column
(auto_increment_column_desc) VALUES ('Test Data');

INSERT INTO auto_increment_default_column 
(auto_increment_column_id, auto_increment_column_desc)
 VALUES (999, 'Manually inserting auto increment column');

INSERT INTO auto_increment_default_column 
(auto_increment_column_desc) VALUES ('Second Test Data');

</pre>

{{< figure src="Auto_Increment_Coulmn_Oracle.png" title="Auto Increment Coulmn Oracle" alt="Auto Increment Coulmn Oracle" >}}

If you are specifying identity column in insert statment then it will insert whatever value we given if not then it will insert automatically incremented value into the IDENTITY column.

But we cannot insert NULL value it will throw error



<pre>INSERT INTO auto_increment_default_column 
(auto_increment_column_id, auto_increment_column_desc)
 VALUES (NULL, 'Manually inserting auto');

cannot insert NULL into 
("DEPLOY_ADMIN"."AUTO_INCREMENT_DEFAULT_COLUMN"."AUTO_INCREMENT_COLUMN_ID")</pre>

### BY DEFAULT ON NULL AS IDENTITY Example:

Use&nbsp;BY DEFAULT ON NULL option to create identity column to use auto incremented value if you specily NULL in identity column in insert statement.

<pre>CREATE TABLE auto_increment_default_null (
 auto_increment_column_id NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY,
 auto_increment_column_desc VARCHAR2(50)
 );

INSERT INTO auto_increment_default_null 
(auto_increment_column_desc) VALUES ('Test Data');

INSERT INTO auto_increment_default_null 
(auto_increment_column_id, auto_increment_column_desc)
 VALUES (1000, 'Manually inserting auto increment column');

INSERT INTO auto_increment_default_null 
(auto_increment_column_desc) VALUES ('Second Test Data');

INSERT INTO auto_increment_default_null 
(auto_increment_column_id, auto_increment_column_desc)
 VALUES (NULL, 'Not Specified identity column');</pre>

{{< figure src="Auto_Increment_Coulmn_Oracle_tb.png" title="Auto Increment Coulmn Oracle table" alt="Auto Increment Coulmn Oracle table" >}}

Additionally we can change the initial value of identity column and interval between the auto generated values by using following options. The default initial value and interval values for auto increment identity columns equals to 1.

<ul><li>START WITH initial_value</li><li>INCREMENT BY interval_value</li></ul>

<pre> CREATE TABLE identity_startwith (
 id NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY START WITH 10,
 description VARCHAR2(100) not null
 );

 CREATE TABLE identity_startwith_incr (
 id NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY 
 START WITH 10 INCREMENT BY 10,
 description VARCHAR2(100) not null
 );</pre>

In first table IDENTITY_STARTWITH the identity column starts with the value 10. and incremented by 1. Where as in second table IDENTITY_STARTWITH_INCR auto incemented column starts with 10 and incremented by 10.



When you create an identity column, Oracle generates&nbsp; 20 auto increment values before hand for performence reasons and Oracle recommends to include CACHE clause greater than the default of 20 to improve the performance.

<pre>CREATE TABLE auto_increment_table_cache
(auto_increment_column_id NUMBER GENERATED ALWAYS AS IDENTITY CACHE 30, 
auto_increment_column_description VARCHAR2(50));</pre>

&nbsp;

### Create auto increment column in oracle By using&nbsp;Sequences and Triggers Example:

In earlier versions of Oracle we used to create auto increment columns using Sequences and Triggers.

Create a table and add primary key to that table

<pre>CREATE TABLE auto_increment_tb(
 id NUMBER(10) NOT NULL,
description VARCHAR2(100) NOT NULL
);</pre>

And then add primary key constraint

<pre>ALTER TABLE auto_increment_tb
 ADD (
 CONSTRAINT auto_increment_tb_pk PRIMARY KEY (id)
 );</pre>

Now we will create a sequence to generate unique auto incremented values.

A&nbsp;sequence is a data object that can be used by multiple users to generate auto increment values(no duplicate values will be generated).

<pre>CREATE SEQUENCE auto_increment_tb_seq;</pre>

We created sequence and but we are not using it. We will add a TRIGGER on table insert event.

<pre>CREATE OR REPLACE TRIGGER auto_increment_tb_insert
 BEFORE INSERT ON auto_increment_tb
 FOR EACH ROW
BEGIN
 SELECT auto_increment_tb_seq.nextval
 INTO :new.id
 FROM dual;
END;</pre>

Here we are creating a trigger named&nbsp;auto_increment_tb_insert which will be fired on each insertion on table&nbsp;auto_increment_tb.

We are getting next auto incremented value from created sequence by selecting&nbsp;auto_increment_tb_seq.nextval and inserting it into :new row of table ID column.

### Best way to create auto increment column in oracle

Which is best way to insert auto incremented values into table? IDENTITY column or by using sequences and triggers?

Accroding oracle by using IDENTITY column in Oracle 12c is best way to create auto increment column than the older way of using Sequence and Triggers.

### Limitations of IDENTITY Coulmn:

<ul><li>We can add only one IDENTITY column per table.</li><li>We can add identity_clause only on Numeric datatype columns not on User-defined data types.</li><li>We cannot add DEFAULT clause in column defincation if we use&nbsp;identity_clause.</li><li>We can create one table from another by adding a AS SELECT statement at the end of the CREATE TABLE for example “create table new_emp AS SELECT * from emp”; New table wont inherit IDENTITY property on column.</li><li>When you add an identity_clause, then NOT NULL constraint and NOT DEFERRABLE constraint are added by default (implicitly specified). If you add an inline constraint that conflicts with NOT NULL and NOT DEFERRABLE, then an error will occur.</li></ul>

Wait before leaving.
why can’t you follow me on <a href="https://twitter.com/arungudelli" target="_blank">twitter</a> or be a friend on <a href="https://www.facebook.com/gudelliArun" target="_blank">Facebook</a> or <a href="https://plus.google.com/+ArunkumarGudelli" target="_blank">googlePlus</a> or <a href="https://www.linkedin.com/in/arungudelli/" target="_blank">linkedn</a> to get in touch with me.







